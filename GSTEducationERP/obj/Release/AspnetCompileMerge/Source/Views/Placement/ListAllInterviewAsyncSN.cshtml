
@{
	ViewBag.Title = "ListAllInterviewAsyncSN";
	Layout = "~/Views/Shared/_LayoutERP.cshtml";
}

<html>
<head>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.1.0/dist/css/adminlte.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/daterangepicker@3.1.0/daterangepicker.css">

	<script src="~/Content/plugins/jquery/jquery.min.js" type="text/javascript"></script>

	
	<link rel="stylesheet" href="~/Content/Admin/css/UI.css" />
	<link rel="stylesheet" href="~/Content/plugins/datatables-bs4/css/dataTables.bootstrap4.min.css">
	<link rel="stylesheet" href="~/Content/plugins/datatables-responsive/css/responsive.bootstrap4.min.css">
	<link rel="stylesheet" href="~/Content/plugins/datatables-buttons/css/buttons.bootstrap4.min.css">
	<style>
		.card-primary.card-outline-tabs > .card-header a.active {
			border-top: 3px solid #01a6a6;
		}

		.card.card-outline-tabs .card-header a:hover {
			color: #01a6a6;
		}

		.card-primary.card-outline-tabs > .card-header a.active, .card-primary.card-outline-tabs > .card-header a.active:hover {
			border-top: 3px solid #01a6a6;
		}
	</style>
	<style>
		.dataTables_wrapper .btn-secondary {
			color: #235;
			background-color: transparent !important;
			border-color: transparent;
			font-size: x-large;
			margin: 0px !important;
		}

		h2 {
			padding-top: 10px;
			margin-bottom: 10px;
			font-family: Verdana;
			font-weight: bold;
			font-size: medium;
			color: #33CCCC;
		}

		.card-primary.card-outline-tabs > .card-header a.active {
			border-top: 3px solid #33CCCC;
		}

		a {
			color: #33CCCC;
		}

		.card.card-outline-tabs .card-header a:hover {
			color: #33CCCC;
		}

		.card-primary.card-outline-tabs > .card-header a.active, .card-primary.card-outline-tabs > .card-header a.active:hover {
			border-top: 3px solid #33CCCC;
		}

		.card-body {
			font-family: Calibri !important;
			padding-bottom: 0px !important;
		}

		tr:nth-child(even) {
			background-color: #f2f2f2;
		}

		th {
			background-color: #33CCCC;
			color: #000;
			text-align: center !important;
		}

		td {
			text-align: center;
			color: black !important;
		}

		.table td {
			padding: 0px 0px 0px 0px !important;
			font-size: 14px !important;
		}

		.table th {
			padding: 5px 5px 4px 10px !important;
			font-size: 14px !important;
		}

		table.dataTable > thead .sorting:after, table.dataTable > thead .sorting:before {
			font-size: xx-small !important;
		}

		div.dataTables_wrapper div.dataTables_filter {
			margin-top: -40px !important;
		}

		div.dt-buttons {
			margin-top: -20px !important;
		}

		.btn-group > .btn:not(:last-child):not(.dropdown-toggle), .btn-group > .btn-group:not(:last-child) > .btn {
			padding-left: 5px !important;
			padding-right: 5px !important;
		}

		div.dataTables_wrapper div.dataTables_filter label {
			font-size: small !important;
		}

		div.dataTables_wrapper div.dataTables_filter input {
			height: 20px !important;
		}

		div.dataTables_wrapper div.dataTables_info {
			padding: 0px !important;
			font-size: small !important;
		}

		div.dataTables_wrapper div.dataTables_paginate ul.pagination {
			margin-top: -20px !important;
		}

		div.dataTables_wrapper div.dataTables_paginate {
			font-size: small !important;
		}
	</style>
</head>
<body style="margin: 0; padding: 0;">
	<br />


	<div class="card " style="padding: 10px;">
		<h2>Interview</h2>
		<hr />
		<div class="container" style="margin-left:-10px">
			<div class="row">
				<div class="col-7">
					<div class="card card-primary card-outline card-outline-tabs">
						<div class="card-header p-0 border-bottom-0">
							<ul class="nav nav-tabs" id="custom-tabs-four-tab" role="tablist">

								<li class="nav-item" style="width: 25%;">
									<a class="nav-link active" id="ShortlistedStudents" data-toggle="tab" href="@Url.Action("ListShortlistedStudentsAsyncSN", "Placement")">Shortlisted</a>
								</li>
								<li class="nav-item" style="width: 25%;">
									<a class="nav-link" id="Scheduled" data-toggle="tab" href="@Url.Action("ListScheduledInterviewAsyncSN", "Placement")">Scheduled</a>
								</li>
								<li class="nav-item" style="width: 25%;">
									<a class="nav-link" id="InterviewPerformance" data-toggle="tab" href="@Url.Action("ListInterviewPerformanceAsyncSN", "Placement")">Performance</a>
								</li>
								<li class="nav-item" style="width: 25%;">
									<a class="nav-link" id="PlacedStudents" data-toggle="tab" href="@Url.Action("ListPlacedStudentsAsyncSN", "Placement")">Placed Students</a>
								</li>
							</ul>
						</div>
					</div>
				</div>
				<div class="col-5">
					<div class="input-group" id="dateFilter" >
						<label class="col-md-3">Date Range:</label>
						<div class="input-group col-md-9">
							<input type="text" class="form-control" id="dateRangePicker">
							<div class="input-group-append">
								<span class="input-group-text"><i class="far fa-calendar-alt"></i></span>
							</div>
						</div>
					</div>

				</div>
			</div>
		</div>

		<div id="InterviewList"></div>

	</div>

	<script src="~/Content/plugins/bootstrap/js/bootstrap.bundle.min.js" type="text/javascript"></script>
	<script src="https://cdn.jsdelivr.net/npm/admin-lte@3.1.0/dist/js/adminlte.min.js"></script>

	<!-- Date Range Picker Script -->
	<script src="https://cdn.jsdelivr.net/npm/daterangepicker@3.1.0/moment.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/daterangepicker@3.1.0/daterangepicker.js"></script>
	<script src="~/Content/plugins/datatables/jquery.dataTables.min.js" type="text/javascript"></script>
	<script src="~/Content/plugins/datatables-bs4/js/dataTables.bootstrap4.min.js" type="text/javascript"></script>
	<script src="~/Content/plugins/datatables-responsive/js/dataTables.responsive.min.js" type="text/javascript"></script>
	<script src="~/Content/plugins/datatables-responsive/js/responsive.bootstrap4.min.js" type="text/javascript"></script>
	<script src="~/Content/plugins/datatables-buttons/js/dataTables.buttons.min.js" type="text/javascript"></script>
	<script src="~/Content/plugins/datatables-buttons/js/buttons.bootstrap4.min.js" type="text/javascript"></script>
	<script src="~/Content/plugins/jszip/jszip.min.js" type="text/javascript"></script>
	<script src="~/Content/plugins/pdfmake/pdfmake.min.js" type="text/javascript"></script>
	<script src="~/Content/plugins/pdfmake/vfs_fonts.js" type="text/javascript"></script>
	<script src="~/Content/plugins/datatables-buttons/js/buttons.html5.min.js" type="text/javascript"></script>
	<script src="~/Content/plugins/datatables-buttons/js/buttons.print.min.js" type="text/javascript"></script>
	<script src="~/Content/plugins/datatables-buttons/js/buttons.colVis.min.js" type="text/javascript"></script>


	<script>
    jQuery(document).ready(function ($) {
        $('#dateRangePicker').daterangepicker({
            autoUpdateInput: false,
            locale: {
                cancelLabel: 'Clear'
            }
        });

        function loadTabContent(tabContentUrl) {
            $.ajax({
                url: tabContentUrl,
                type: 'GET',
                success: function (data) {
                    $('#InterviewList').html(data);
                    var table = $('#InterviewList table').DataTable({
                        "responsive": true,
                        "lengthChange": false,
                        "autoWidth": false,
                        "stateSave": true,
                        "dom": 'Bfrtip', // Only buttons without other elements
                        "buttons": [
                            {
                                extend: 'copy',
                                text: '<img src="/Content/Admin/icon/copy.png" title="Copy" alt="Copy" height="20" width="20" />',
                                titleAttr: 'Copy'
                            },
                            {
                                extend: 'csv',
                                text: '<img src="/Content/Admin/icon/csv.jpg" title="CSV" alt="CSV" height="25" width="25" />',
                                titleAttr: 'CSV'
                            },
                            {
                                extend: 'excel',
                                text: '<img src="/Content/Admin/icon/xls-file.png" title="xls" alt="xls" height="20" width="20" />',
                                titleAttr: 'Excel'
                            },
                            {
                                extend: 'pdf',
                                text: '<img src="/Content/Admin/icon/pdf-file.png" title="pdf" alt="pdf" height="20" width="20" />',
                                titleAttr: 'PDF'
                            },
                            {
                                extend: 'print',
                                text: '<img src="/Content/Admin/icon/printer.png" title="printer" alt="printer" height="20" width="20" />',
                                titleAttr: 'Print'
                            },
                            {
                                extend: 'colvis',
                                text: '<img src="/Content/Admin/icon/column.jpg" title="column" alt="column" height="20" width="20" />',
                                titleAttr: 'Columns'
                            }
                        ]
                    });
					
					// Apply date range filter for Scheduled and Placed Students tabs
					if (tabContentUrl.includes("ListScheduledInterviewAsyncSN") || tabContentUrl.includes("ListPlacedStudentsAsyncSN")) {
						$('#dateFilter').show(); // Show date filter for specific tabs

						$('#dateRangePicker').on('apply.daterangepicker', function (ev, picker) {
							var startDate = picker.startDate.format('YYYY-MM-DD');
							var endDate = picker.endDate.format('YYYY-MM-DD');

							console.log('Selected Date Range:', startDate, endDate);

							// Adjust the column index if the InterviewDate is not at index 9
							table.column(8).search(startDate + ' - ' + endDate).draw();

							// Update the dateRangePicker input field with the selected range
							$(this).val(startDate + ' - ' + endDate);
						});

						// Clear the date range filter on dateRangePicker cancel
						$('#dateRangePicker').on('cancel.daterangepicker', function () {
							table.column(8).search('').draw();
							$(this).val('');
						});
					} else {
						$('#dateFilter').hide(); // Hide date filter for other tabs
					}
				},
                error: function () {
                    alert('Error loading content.');
                }
            });
        }

        $('#custom-tabs-four-tab').on('click', '.nav-link', function (e) {
            e.preventDefault();
            var tabContentUrl = $(this).attr('href');
            loadTabContent(tabContentUrl);
        });

        var defaultTabUrl = '@Url.Action("ListShortlistedStudentsAsyncSN", "Placement")';
        loadTabContent(defaultTabUrl);
    });
	</script>

	@*<script>
			jQuery(document).ready(function ($) {
			function loadTabContent(tabContentUrl) {
				$.ajax({
					url: tabContentUrl,
					type: 'GET',
					success: function (data) {
						$('#InterviewList').html(data);
						var table = $('#InterviewList table').DataTable({
							"responsive": true,
							"lengthChange": false,
							"autoWidth": false,
							"stateSave": true,
							"dom": 'Bfrtip', // Only buttons without other elements
							"buttons": [
								{
									extend: 'copy',
									text: '<img src="/Content/Admin/icon/copy.png" title="Copy" alt="Copy" height="20" width="20" />',
									titleAttr: 'Copy'
								},
								{
									extend: 'csv',
									text: '<img src="/Content/Admin/icon/csv.jpg" title="CSV" alt="CSV" height="25" width="25" />',
									titleAttr: 'CSV'
								},
								{
									extend: 'excel',
									text: '<img src="/Content/Admin/icon/xls-file.png" title="xls" alt="xls" height="20" width="20" />',
									titleAttr: 'Excel'
								},
								{
									extend: 'pdf',
									text: '<img src="/Content/Admin/icon/pdf-file.png" title="pdf" alt="pdf" height="20" width="20" />',
									titleAttr: 'PDF'
								},
								{
									extend: 'print',
									text: '<img src="/Content/Admin/icon/printer.png" title="printer" alt="printer" height="20" width="20" />',
									titleAttr: 'Print'
								},
								{
									extend: 'colvis',
									text: '<img src="/Content/Admin/icon/column.jpg" title="column" alt="column" height="20" width="20" />',
									titleAttr: 'Columns'
								}
							]
						});
						table.buttons().container().appendTo('#InterviewList .col-md-6:eq(0)');
					},
					error: function () {
						alert('Error loading content.');
					}
				});
			}

			$('#custom-tabs-four-tab').on('click', '.nav-link', function (e) {
				e.preventDefault();
				var tabContentUrl = $(this).attr('href');
				loadTabContent(tabContentUrl);
			});
			var defaultTabUrl = '@Url.Action("ListShortlistedStudentsAsyncSN", "Placement")';
			loadTabContent(defaultTabUrl);
		});
		</script>*@
	@*<script>
			// Add this script to set the initial values
			document.addEventListener("DOMContentLoaded", function () {
				// Get today's date in the format "YYYY-MM-DD"
				var today = new Date().toISOString().split('T')[0];

				// Set the initial values for fromDate and toDate
				document.getElementById("fromDate").value = today;
				document.getElementById("toDate").value = today;
			});
		</script>*@
</body>
</html>

